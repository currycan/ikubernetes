---
# install shadows ,docker-ce
- hosts: test
  sudo: yes
  sudo_user: root
  tasks:
  - name:  mkdir for shadows
    file: path={{ item }} state=directory
    with_items:
    - /etc/shadowsocks/

  - name: deploy shadows
    copy: src={{ item.src }} dest={{item.dest}} mode=777  owner=root group=root backup=yes
    with_items:
    - { src: '/opt/ikubernetes/ansible/files/shadows/shadowsocks.json', dest: '/etc/shadowsocks/shadowsocks.json' }
    - { src: '/opt/ikubernetes/ansible/files/shadows/proxychains.conf', dest: '/usr/local/etc/proxychains.conf' }
    - { src: '/opt/ikubernetes/ansible/files/shadows/ss', dest: '/usr/local/bin/ss' }
    - { src: '/opt/ikubernetes/ansible/files/shadows/sslocal', dest: '/usr/local/bin/sslocal' }
    - { src: '/opt/ikubernetes/ansible/files/shadows/proxychains.tar.gz', dest: '/tmp/proxychains.tar.gz' }
  - name: untar file
    shell: cd /tmp && tar xf proxychains.tar.gz;
